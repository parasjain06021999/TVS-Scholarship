(()=>{var e={};e.id=668,e.ids=[668],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6123:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var i=s(50482),a=s(69108),r=s(62563),n=s.n(r),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["admin",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9791)),"C:\\Users\\paras\\source\\repos\\tvs-scholarship\\tvs-scholarship\\frontend\\src\\app\\admin\\analytics\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,43625)),"C:\\Users\\paras\\source\\repos\\tvs-scholarship\\tvs-scholarship\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\paras\\source\\repos\\tvs-scholarship\\tvs-scholarship\\frontend\\src\\app\\admin\\analytics\\page.tsx"],u="/admin/analytics/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/analytics/page",pathname:"/admin/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},32496:(e,t,s)=>{Promise.resolve().then(s.bind(s,20939))},20939:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var i=s(95344),a=s(3729),r=s(22254);let n=({title:e,data:t,dataKey:s,type:a,onTypeChange:r})=>{let n=Math.max(...t.map(e=>e.count)),o=t.reduce((e,t)=>e+t.count,0);return 0===t.length?(0,i.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg p-1",children:[i.jsx("span",{className:"text-sm text-gray-600 px-2",children:"Chart type:"}),i.jsx("button",{onClick:()=>r("pie"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${"pie"===a?"bg-blue-500 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"\uD83E\uDD67 Pie"}),i.jsx("button",{onClick:()=>r("bar"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${"bar"===a?"bg-blue-500 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"\uD83D\uDCCA Bar"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[i.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDCCA"}),i.jsx("p",{className:"text-lg font-medium",children:"No Data Available"}),i.jsx("p",{className:"text-sm",children:"Try changing the filter or check back later"})]})]}):(0,i.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Total: ",o.toLocaleString()," applications"]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-50 rounded-lg p-1",children:[i.jsx("span",{className:"text-sm text-gray-600 px-2",children:"Chart type:"}),i.jsx("button",{onClick:()=>r("pie"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${"pie"===a?"bg-blue-500 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"\uD83E\uDD67 Pie"}),i.jsx("button",{onClick:()=>r("bar"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${"bar"===a?"bg-blue-500 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"\uD83D\uDCCA Bar"})]})]}),"bar"===a?i.jsx("div",{className:"h-80 flex items-end space-x-3 bg-gray-50 rounded-lg p-4",children:t.map((e,t)=>{let a=e.count/n*100,r=e.count/n*240;return(0,i.jsxs)("div",{className:"flex flex-col items-center flex-1 group",children:[i.jsx("div",{className:"relative w-full",children:(0,i.jsxs)("div",{className:"w-full bg-gradient-to-t from-blue-500 to-blue-400 rounded-t-lg transition-all duration-300 hover:from-blue-600 hover:to-blue-500 shadow-lg",style:{height:`${r}px`},children:[(0,i.jsxs)("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.count," (",a.toFixed(1),"%)"]}),i.jsx("div",{className:"text-white text-sm font-bold p-2 text-center h-full flex items-center justify-center",children:e.count})]})}),i.jsx("div",{className:"text-xs text-gray-700 mt-3 text-center break-words font-medium max-w-full",children:e[s]})]},t)})}):(0,i.jsxs)("div",{className:"h-80 flex items-center justify-center bg-gray-50 rounded-lg p-8",children:[(0,i.jsxs)("div",{className:"relative w-64 h-64",children:[t.map((e,s)=>{let a=e.count/t.reduce((e,t)=>e+t.count,0)*100,r=t.slice(0,s).reduce((e,t)=>e+t.count,0)/t.reduce((e,t)=>e+t.count,0)*360,n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"];return i.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(from ${r}deg, ${n[s%n.length]} ${3.6*a}deg, transparent ${3.6*a}deg)`}},s)}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center bg-white rounded-full w-32 h-32 flex flex-col items-center justify-center shadow-lg",children:[i.jsx("div",{className:"text-3xl font-bold text-gray-800",children:t.reduce((e,t)=>e+t.count,0)}),i.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total"})]})})]}),i.jsx("div",{className:"ml-8 space-y-2",children:t.map((e,a)=>{let r=e.count/t.reduce((e,t)=>e+t.count,0)*100,n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316"];return(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:n[a%n.length]}}),i.jsx("span",{className:"text-sm text-gray-700 font-medium",children:e[s]}),(0,i.jsxs)("span",{className:"text-sm text-gray-500",children:["(",r.toFixed(1),"%)"]})]},a)})})]})]})};function o(){let[e,t]=(0,a.useState)({stateDistribution:[],districtDistribution:[],genderDistribution:[],classDistribution:[],degreeDistribution:[],fatherOccupationDistribution:[],fatherIncomeDistribution:[],instituteTypeDistribution:[]}),[s,o]=(0,a.useState)(!0),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)({state:"bar",district:"bar",gender:"bar",class:"bar",degree:"bar",occupation:"bar",income:"bar",institute:"bar"}),[x,m]=(0,a.useState)("All"),p=(0,r.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t){p.push("/admin/login");return}let s=JSON.parse(t);if("ADMIN"!==s.role&&"REVIEWER"!==s.role&&"SUPER_ADMIN"!==s.role){p.push("/admin/login");return}h()},[p,x]);let h=async()=>{try{o(!0),c("");let e=await fetch("https://tvs-scholarship.onrender.com/applications?page=1&limit=1000",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){let s=await e.json(),i=[];s.data&&s.data.applications?i=s.data.applications:s.applications?i=s.applications:Array.isArray(s)?i=s:s.data&&Array.isArray(s.data)&&(i=s.data);let a=i;if("All"!==x&&(a=i.filter(e=>e.status===x)),a.length>0){let e=g(a);t(e)}else t({stateDistribution:[],districtDistribution:[],genderDistribution:[],classDistribution:[],degreeDistribution:[],fatherOccupationDistribution:[],fatherIncomeDistribution:[],instituteTypeDistribution:[]})}else c("Failed to fetch applications data"),t(f())}catch(e){c(e.message||"Failed to fetch analytics data"),t(f())}finally{o(!1)}},g=e=>{let t={},s={},i={},a={},r={},n={},o={},l={};return e.forEach(e=>{let c=e.student?.state||"Unknown";t[c]=(t[c]||0)+1;let d=e.student?.city||"Unknown";s[d]=(s[d]||0)+1;let u=e.applicationData?.personalInfo?.gender||"Unknown";i[u]=(i[u]||0)+1;let x=e.applicationData?.educationInfo?.currentYear,m=x?`Year ${x}`:"Unknown";a[m]=(a[m]||0)+1;let p=e.applicationData?.educationInfo?.currentCourse||"Unknown";r[p]=(r[p]||0)+1;let h=e.applicationData?.familyInfo?.fatherOccupation||"Unknown";n[h]=(n[h]||0)+1;let g=b(e.applicationData?.familyInfo?.fatherIncome||0);o[g]=(o[g]||0)+1;let f=y(e.applicationData?.educationInfo?.currentInstitution||"Unknown");l[f]=(l[f]||0)+1}),{stateDistribution:Object.entries(t).map(([e,t])=>({state:e,count:t})),districtDistribution:Object.entries(s).map(([e,t])=>({district:e,count:t})),genderDistribution:Object.entries(i).map(([e,t])=>({gender:e,count:t})),classDistribution:Object.entries(a).map(([e,t])=>({class:e,count:t})),degreeDistribution:Object.entries(r).map(([e,t])=>({degree:e,count:t})),fatherOccupationDistribution:Object.entries(n).map(([e,t])=>({occupation:e,count:t})),fatherIncomeDistribution:Object.entries(o).map(([e,t])=>({incomeRange:e,count:t})),instituteTypeDistribution:Object.entries(l).map(([e,t])=>({type:e,count:t}))}},b=e=>e<1e5?"<1 L":e<2e5?"1L-2L":e<3e5?"2L-3L":e<4e5?"3L-4L":e<5e5?"4L-5L":">5L",y=e=>e.toLowerCase().includes("government")||e.toLowerCase().includes("govt")?"Government":e.toLowerCase().includes("aided")?"Government Aided":"Private",f=()=>({stateDistribution:[{state:"Tamil Nadu",count:350},{state:"Karnataka",count:70}],districtDistribution:[{district:"Coimbatore",count:130},{district:"Bangalore",count:95},{district:"Salem",count:25},{district:"Madurai",count:18},{district:"Krishnagiri",count:15},{district:"Tirunelveli",count:10},{district:"Dharmapuri",count:8},{district:"Vijayanagar",count:7},{district:"Bijapur",count:6},{district:"Nilgiris",count:5},{district:"Vijayapura",count:4},{district:"Chitradurga",count:3},{district:"Pudukkottai",count:2},{district:"Shimoga",count:1},{district:"Udupi",count:1}],genderDistribution:[{gender:"Male",count:330},{gender:"Female",count:90}],classDistribution:[{class:"Polytechnic/Diploma",count:420}],degreeDistribution:[],fatherOccupationDistribution:[{occupation:"Farmer",count:78},{occupation:"Labourer",count:49},{occupation:"Business",count:43},{occupation:"Electrician",count:35},{occupation:"Mechanic",count:32},{occupation:"Engineer",count:15},{occupation:"Salesperson",count:13},{occupation:"Carpenter",count:8},{occupation:"Chef",count:7},{occupation:"Teacher",count:6},{occupation:"Librarian",count:5},{occupation:"Painter",count:4},{occupation:"Pharmacist",count:3}],fatherIncomeDistribution:[{incomeRange:"<1 L",count:168},{incomeRange:"1L-2L",count:140},{incomeRange:"2L-3L",count:10},{incomeRange:"4L-5L",count:8},{incomeRange:">5L",count:7},{incomeRange:"3L-4L",count:6}],instituteTypeDistribution:[{type:"Private",count:195},{type:"Government Aided",count:190},{type:"Government",count:38}]}),j=(e,t)=>{u(s=>({...s,[e]:t}))};return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-red-600"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"Loading analytics..."})]})}):(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-blue-700 shadow-lg",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"flex justify-between items-center py-8",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("button",{onClick:()=>p.push("/admin/dashboard"),className:"mr-6 text-white hover:text-blue-100 transition-colors duration-200 flex items-center space-x-2",children:[i.jsx("span",{className:"text-xl",children:"←"}),i.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Analytics Dashboard"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Comprehensive insights into scholarship applications"})]})]}),(0,i.jsxs)("div",{className:"text-white text-right",children:[i.jsx("div",{className:"text-sm text-blue-100",children:"Total Applications"}),i.jsx("div",{className:"text-2xl font-bold",children:e.stateDistribution.reduce((e,t)=>e+t.count,0).toLocaleString()})]})]})})}),i.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[l&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:l}),i.jsx("div",{className:"bg-white shadow-lg rounded-xl p-6 mb-8 border border-gray-100",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Filter by Status"}),(0,i.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"block w-48 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm font-medium",children:[i.jsx("option",{value:"All",children:"\uD83D\uDCCA All Applications"}),i.jsx("option",{value:"SUBMITTED",children:"\uD83D\uDCDD Submitted"}),i.jsx("option",{value:"UNDER_REVIEW",children:"\uD83D\uDD0D Under Review"}),i.jsx("option",{value:"APPROVED",children:"✅ Approved"}),i.jsx("option",{value:"REJECTED",children:"❌ Rejected"})]})]}),i.jsx("div",{className:"flex items-end",children:(0,i.jsxs)("button",{onClick:h,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl flex items-center space-x-2",children:[i.jsx("span",{children:"\uD83D\uDD04"}),i.jsx("span",{children:"Apply Filter"})]})})]}),(0,i.jsxs)("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-gray-500",children:"Current Filter"}),i.jsx("div",{className:"text-lg font-semibold text-gray-800",children:x})]})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white shadow-lg rounded-xl p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:i.jsx("span",{className:"text-2xl",children:"\uD83C\uDFDB️"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total States"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.stateDistribution.length})]})]})}),i.jsx("div",{className:"bg-white shadow-lg rounded-xl p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100",children:i.jsx("span",{className:"text-2xl",children:"\uD83C\uDFD8️"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Districts"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.districtDistribution.length})]})]})}),i.jsx("div",{className:"bg-white shadow-lg rounded-xl p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-purple-100",children:i.jsx("span",{className:"text-2xl",children:"\uD83D\uDC65"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Gender Groups"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.genderDistribution.length})]})]})}),i.jsx("div",{className:"bg-white shadow-lg rounded-xl p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-orange-100",children:i.jsx("span",{className:"text-2xl",children:"\uD83C\uDF93"})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Degree Types"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.degreeDistribution.length})]})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[i.jsx(n,{title:"Distribution of applications by State",data:e.stateDistribution,dataKey:"state",type:d.state,onTypeChange:e=>j("state",e)}),i.jsx(n,{title:"Distribution of applications by District",data:e.districtDistribution,dataKey:"district",type:d.district,onTypeChange:e=>j("district",e)}),i.jsx(n,{title:"Distribution of applications by Gender",data:e.genderDistribution,dataKey:"gender",type:d.gender,onTypeChange:e=>j("gender",e)}),i.jsx(n,{title:"Distribution of applications by Present Class",data:e.classDistribution,dataKey:"class",type:d.class,onTypeChange:e=>j("class",e)}),i.jsx(n,{title:"Distribution of applications by Degree",data:e.degreeDistribution,dataKey:"degree",type:d.degree,onTypeChange:e=>j("degree",e)}),i.jsx(n,{title:"Distribution of applications by Father Occupation",data:e.fatherOccupationDistribution,dataKey:"occupation",type:d.occupation,onTypeChange:e=>j("occupation",e)}),i.jsx(n,{title:"Distribution of applications by Father's Income",data:e.fatherIncomeDistribution,dataKey:"incomeRange",type:d.income,onTypeChange:e=>j("income",e)}),i.jsx(n,{title:"Distribution of applications by Institute Type",data:e.instituteTypeDistribution,dataKey:"type",type:d.institute,onTypeChange:e=>j("institute",e)})]})]})})]})}},9791:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>a,default:()=>n});let i=(0,s(86843).createProxy)(String.raw`C:\Users\paras\source\repos\tvs-scholarship\tvs-scholarship\frontend\src\app\admin\analytics\page.tsx`),{__esModule:a,$$typeof:r}=i,n=i.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[638,793,929],()=>s(6123));module.exports=i})();